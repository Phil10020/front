import{a4 as Z,a3 as ee,aM as ae,aN as te,an as se,y as ie,B as ne,aP as le,q as re,a7 as X,$ as M,a8 as N,a2 as T,c as w,a1 as b,ag as G,ak as I,aa as U,af as oe,ac as V,a0 as F,L as Y,a9 as q,aT as ce,aU as R,ai as pe,au as de}from"./index-9d038aab.js";import{c as fe,a as j}from"./index.esm-75ba489a.js";import{f as ue,c as me,h as ge,i as J,j as ve,e as he,a as ye,g as Ce,b as be,A as xe,S as Ee,d as Le}from"./effect-virtual-transition-end-9ff7a6a1.js";import{l as $e}from"./logoSVG-f9f0064d.js";import{V as ke}from"./VBreadcrumbs-9158148f.js";import{V as Se}from"./VContainer-7caee0b2.js";import{V as W}from"./VSheet-909bd6fd.js";import{V as _e,a as K}from"./VRow-624c6e5a.js";function Q(k,e,S,f){return k.params.createElements&&Object.keys(f).forEach(u=>{if(!S[u]&&S.auto===!0){let o=ue(k.el,`.${f[u]}`)[0];o||(o=me("div",f[u]),o.className=f[u],k.el.append(o)),S[u]=o,e[u]=o}}),S}function we(k){let{swiper:e,extendParams:S,on:f,emit:u}=k;S({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const o=i=>(Array.isArray(i)?i:[i]).filter(l=>!!l);function L(i){let l;return i&&typeof i=="string"&&e.isElement&&(l=e.el.querySelector(i),l)?l:(i&&(typeof i=="string"&&(l=[...document.querySelectorAll(i)]),e.params.uniqueNavElements&&typeof i=="string"&&l.length>1&&e.el.querySelectorAll(i).length===1&&(l=e.el.querySelector(i))),i&&!l?i:l)}function v(i,l){const p=e.params.navigation;i=o(i),i.forEach(a=>{a&&(a.classList[l?"add":"remove"](...p.disabledClass.split(" ")),a.tagName==="BUTTON"&&(a.disabled=l),e.params.watchOverflow&&e.enabled&&a.classList[e.isLocked?"add":"remove"](p.lockClass))})}function c(){const{nextEl:i,prevEl:l}=e.navigation;if(e.params.loop){v(l,!1),v(i,!1);return}v(l,e.isBeginning&&!e.params.rewind),v(i,e.isEnd&&!e.params.rewind)}function r(i){i.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),u("navigationPrev"))}function A(i){i.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),u("navigationNext"))}function $(){const i=e.params.navigation;if(e.params.navigation=Q(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(i.nextEl||i.prevEl))return;let l=L(i.nextEl),p=L(i.prevEl);Object.assign(e.navigation,{nextEl:l,prevEl:p}),l=o(l),p=o(p);const a=(t,s)=>{t&&t.addEventListener("click",s==="next"?A:r),!e.enabled&&t&&t.classList.add(...i.lockClass.split(" "))};l.forEach(t=>a(t,"next")),p.forEach(t=>a(t,"prev"))}function x(){let{nextEl:i,prevEl:l}=e.navigation;i=o(i),l=o(l);const p=(a,t)=>{a.removeEventListener("click",t==="next"?A:r),a.classList.remove(...e.params.navigation.disabledClass.split(" "))};i.forEach(a=>p(a,"next")),l.forEach(a=>p(a,"prev"))}f("init",()=>{e.params.navigation.enabled===!1?B():($(),c())}),f("toEdge fromEdge lock unlock",()=>{c()}),f("destroy",()=>{x()}),f("enable disable",()=>{let{nextEl:i,prevEl:l}=e.navigation;i=o(i),l=o(l),[...i,...l].filter(p=>!!p).forEach(p=>p.classList[e.enabled?"remove":"add"](e.params.navigation.lockClass))}),f("click",(i,l)=>{let{nextEl:p,prevEl:a}=e.navigation;p=o(p),a=o(a);const t=l.target;if(e.params.navigation.hideOnClick&&!a.includes(t)&&!p.includes(t)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===t||e.pagination.el.contains(t)))return;let s;p.length?s=p[0].classList.contains(e.params.navigation.hiddenClass):a.length&&(s=a[0].classList.contains(e.params.navigation.hiddenClass)),u(s===!0?"navigationShow":"navigationHide"),[...p,...a].filter(n=>!!n).forEach(n=>n.classList.toggle(e.params.navigation.hiddenClass))}});const P=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),$(),c()},B=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),x()};Object.assign(e.navigation,{enable:P,disable:B,update:c,init:$,destroy:x})}function H(k){return k===void 0&&(k=""),`.${k.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Be(k){let{swiper:e,extendParams:S,on:f,emit:u}=k;const o="swiper-pagination";S({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:a=>a,formatFractionTotal:a=>a,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),e.pagination={el:null,bullets:[]};let L,v=0;const c=a=>(Array.isArray(a)?a:[a]).filter(t=>!!t);function r(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function A(a,t){const{bulletActiveClass:s}=e.params.pagination;a&&(a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&(a.classList.add(`${s}-${t}`),a=a[`${t==="prev"?"previous":"next"}ElementSibling`],a&&a.classList.add(`${s}-${t}-${t}`)))}function $(a){const t=a.target.closest(H(e.params.pagination.bulletClass));if(!t)return;a.preventDefault();const s=J(t)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===s)return;const n=e.getSlideIndexByData(s),d=e.getSlideIndexByData(e.realIndex);n>e.slides.length-e.loopedSlides&&e.loopFix({direction:n>d?"next":"prev",activeSlideIndex:n,slideTo:!1}),e.slideToLoop(s)}else e.slideTo(s)}function x(){const a=e.rtl,t=e.params.pagination;if(r())return;let s=e.pagination.el;s=c(s);let n,d;const E=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,D=e.params.loop?Math.ceil(E/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(d=e.previousRealIndex||0,n=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(n=e.snapIndex,d=e.previousSnapIndex):(d=e.previousIndex||0,n=e.activeIndex||0),t.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const m=e.pagination.bullets;let _,C,O;if(t.dynamicBullets&&(L=ge(m[0],e.isHorizontal()?"width":"height",!0),s.forEach(h=>{h.style[e.isHorizontal()?"width":"height"]=`${L*(t.dynamicMainBullets+4)}px`}),t.dynamicMainBullets>1&&d!==void 0&&(v+=n-(d||0),v>t.dynamicMainBullets-1?v=t.dynamicMainBullets-1:v<0&&(v=0)),_=Math.max(n-v,0),C=_+(Math.min(m.length,t.dynamicMainBullets)-1),O=(C+_)/2),m.forEach(h=>{const y=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(g=>`${t.bulletActiveClass}${g}`)].map(g=>typeof g=="string"&&g.includes(" ")?g.split(" "):g).flat();h.classList.remove(...y)}),s.length>1)m.forEach(h=>{const y=J(h);y===n?h.classList.add(...t.bulletActiveClass.split(" ")):e.isElement&&h.setAttribute("part","bullet"),t.dynamicBullets&&(y>=_&&y<=C&&h.classList.add(...`${t.bulletActiveClass}-main`.split(" ")),y===_&&A(h,"prev"),y===C&&A(h,"next"))});else{const h=m[n];if(h&&h.classList.add(...t.bulletActiveClass.split(" ")),e.isElement&&m.forEach((y,g)=>{y.setAttribute("part",g===n?"bullet-active":"bullet")}),t.dynamicBullets){const y=m[_],g=m[C];for(let z=_;z<=C;z+=1)m[z]&&m[z].classList.add(...`${t.bulletActiveClass}-main`.split(" "));A(y,"prev"),A(g,"next")}}if(t.dynamicBullets){const h=Math.min(m.length,t.dynamicMainBullets+4),y=(L*h-L)/2-O*L,g=a?"right":"left";m.forEach(z=>{z.style[e.isHorizontal()?g:"top"]=`${y}px`})}}s.forEach((m,_)=>{if(t.type==="fraction"&&(m.querySelectorAll(H(t.currentClass)).forEach(C=>{C.textContent=t.formatFractionCurrent(n+1)}),m.querySelectorAll(H(t.totalClass)).forEach(C=>{C.textContent=t.formatFractionTotal(D)})),t.type==="progressbar"){let C;t.progressbarOpposite?C=e.isHorizontal()?"vertical":"horizontal":C=e.isHorizontal()?"horizontal":"vertical";const O=(n+1)/D;let h=1,y=1;C==="horizontal"?h=O:y=O,m.querySelectorAll(H(t.progressbarFillClass)).forEach(g=>{g.style.transform=`translate3d(0,0,0) scaleX(${h}) scaleY(${y})`,g.style.transitionDuration=`${e.params.speed}ms`})}t.type==="custom"&&t.renderCustom?(m.innerHTML=t.renderCustom(e,n+1,D),_===0&&u("paginationRender",m)):(_===0&&u("paginationRender",m),u("paginationUpdate",m)),e.params.watchOverflow&&e.enabled&&m.classList[e.isLocked?"add":"remove"](t.lockClass)})}function P(){const a=e.params.pagination;if(r())return;const t=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let s=e.pagination.el;s=c(s);let n="";if(a.type==="bullets"){let d=e.params.loop?Math.ceil(t/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&d>t&&(d=t);for(let E=0;E<d;E+=1)a.renderBullet?n+=a.renderBullet.call(e,E,a.bulletClass):n+=`<${a.bulletElement} ${e.isElement?'part="bullet"':""} class="${a.bulletClass}"></${a.bulletElement}>`}a.type==="fraction"&&(a.renderFraction?n=a.renderFraction.call(e,a.currentClass,a.totalClass):n=`<span class="${a.currentClass}"></span> / <span class="${a.totalClass}"></span>`),a.type==="progressbar"&&(a.renderProgressbar?n=a.renderProgressbar.call(e,a.progressbarFillClass):n=`<span class="${a.progressbarFillClass}"></span>`),e.pagination.bullets=[],s.forEach(d=>{a.type!=="custom"&&(d.innerHTML=n||""),a.type==="bullets"&&e.pagination.bullets.push(...d.querySelectorAll(H(a.bulletClass)))}),a.type!=="custom"&&u("paginationRender",s[0])}function B(){e.params.pagination=Q(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const a=e.params.pagination;if(!a.el)return;let t;typeof a.el=="string"&&e.isElement&&(t=e.el.querySelector(a.el)),!t&&typeof a.el=="string"&&(t=[...document.querySelectorAll(a.el)]),t||(t=a.el),!(!t||t.length===0)&&(e.params.uniqueNavElements&&typeof a.el=="string"&&Array.isArray(t)&&t.length>1&&(t=[...e.el.querySelectorAll(a.el)],t.length>1&&(t=t.filter(s=>ve(s,".swiper")[0]===e.el)[0])),Array.isArray(t)&&t.length===1&&(t=t[0]),Object.assign(e.pagination,{el:t}),t=c(t),t.forEach(s=>{a.type==="bullets"&&a.clickable&&s.classList.add(a.clickableClass),s.classList.add(a.modifierClass+a.type),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.type==="bullets"&&a.dynamicBullets&&(s.classList.add(`${a.modifierClass}${a.type}-dynamic`),v=0,a.dynamicMainBullets<1&&(a.dynamicMainBullets=1)),a.type==="progressbar"&&a.progressbarOpposite&&s.classList.add(a.progressbarOppositeClass),a.clickable&&s.addEventListener("click",$),e.enabled||s.classList.add(a.lockClass)}))}function i(){const a=e.params.pagination;if(r())return;let t=e.pagination.el;t&&(t=c(t),t.forEach(s=>{s.classList.remove(a.hiddenClass),s.classList.remove(a.modifierClass+a.type),s.classList.remove(e.isHorizontal()?a.horizontalClass:a.verticalClass),a.clickable&&s.removeEventListener("click",$)})),e.pagination.bullets&&e.pagination.bullets.forEach(s=>s.classList.remove(...a.bulletActiveClass.split(" ")))}f("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const a=e.params.pagination;let{el:t}=e.pagination;t=c(t),t.forEach(s=>{s.classList.remove(a.horizontalClass,a.verticalClass),s.classList.add(e.isHorizontal()?a.horizontalClass:a.verticalClass)})}),f("init",()=>{e.params.pagination.enabled===!1?p():(B(),P(),x())}),f("activeIndexChange",()=>{typeof e.snapIndex>"u"&&x()}),f("snapIndexChange",()=>{x()}),f("snapGridLengthChange",()=>{P(),x()}),f("destroy",()=>{i()}),f("enable disable",()=>{let{el:a}=e.pagination;a&&(a=c(a),a.forEach(t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),f("lock unlock",()=>{x()}),f("click",(a,t)=>{const s=t.target,n=c(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&n&&n.length>0&&!s.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&s===e.navigation.nextEl||e.navigation.prevEl&&s===e.navigation.prevEl))return;const d=n[0].classList.contains(e.params.pagination.hiddenClass);u(d===!0?"paginationShow":"paginationHide"),n.forEach(E=>E.classList.toggle(e.params.pagination.hiddenClass))}});const l=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=c(a),a.forEach(t=>t.classList.remove(e.params.pagination.paginationDisabledClass))),B(),P(),x()},p=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:a}=e.pagination;a&&(a=c(a),a.forEach(t=>t.classList.add(e.params.pagination.paginationDisabledClass))),i()};Object.assign(e.pagination,{enable:l,disable:p,render:P,update:x,init:B,destroy:i})}function Ae(k){let{swiper:e,extendParams:S,on:f}=k;S({fadeEffect:{crossFade:!1}}),he({effect:"fade",swiper:e,on:f,setTranslate:()=>{const{slides:L}=e,v=e.params.fadeEffect;for(let c=0;c<L.length;c+=1){const r=e.slides[c];let $=-r.swiperSlideOffset;e.params.virtualTranslate||($-=e.translate);let x=0;e.isHorizontal()||(x=$,$=0);const P=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(r.progress),0):1+Math.min(Math.max(r.progress,-1),0),B=ye(v,r);B.style.opacity=P,B.style.transform=`translate3d(${$}px, ${x}px, 0px)`}},setTransition:L=>{const v=e.slides.map(c=>Ce(c));v.forEach(c=>{c.style.transitionDuration=`${L}ms`}),be({swiper:e,duration:L,transformElements:v,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}const Pe={class:"position-relative"},Me={class:"position-absolute cityDetail-swiper-text text-white"},Ie={key:1,class:"my-5"},De={class:"my-5"},Te={key:2,class:"my-5"},Oe={class:"my-5"},qe=T("h3",{class:"text-secondary"},"點我加入行程",-1),je={__name:"CityDetail",setup(k){const e=[Ae,we,Be,xe],S=Z(),f=ee(),u=ae(),o=te(),L=u.query.id,v=u.query.city,c=u.query.category,r=se([]),A=`${c}/${v}?$filter=${c}ID%20eq%20%27${L}%27&$format=JSON`,$=ie([{title:"城市探索",disabled:!1,to:{name:"City",query:{city:v}}},{title:"",disabled:!1,to:""},{title:"",disabled:!0}]),x=fe({id:j().required(),city:j().required(),category:j().required()});ne(async()=>{var l,p;try{await x.validate(u.query);const a=await le.get(A);await r.push(a.data[0]),$.value[1].title=((l=r[0])==null?void 0:l.City)||"",$.value[2].title=((p=r[0])==null?void 0:p[`${c}Name`])||"",console.log(r[0])}catch(a){a.name}})();const P=re(()=>{var l;return(l=r[0])!=null&&l.UpdateTime?new Date(r[0].UpdateTime).toISOString().split("T")[0]:""}),B={icon1:$e},i=async()=>{console.log("test");try{if(!S.isLogin){o.push("/login");return}const{data:l}=await pe.post("/users/cart",{...r[0],productName:r[0][c+"Name"],productID:r[0][c+"ID"],productCategory:c,productCity:v,action:"add"});S.cart=l.result,console.log("test2")}catch(l){console.log(l),f({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(l,p)=>{var s;const a=X("GMapMarker"),t=X("GMapMap");return M(),N(U,null,[T("section",Pe,[w(G(Ee),{spaceBetween:30,effect:"fade",navigation:!1,pagination:{clickable:!0},autoplay:{delay:3500,disableOnInteraction:!1},modules:e,class:"mySwiper"},{default:b(()=>[(M(),N(U,null,oe(3,n=>{var d;return M(),N(U,{key:n},[(d=r[0])!=null&&d.Picture["PictureUrl"+n]?(M(),F(G(Le),{key:0},{default:b(()=>{var E;return[T("div",{class:"slide-background",style:de({backgroundImage:`url(${(E=r[0])==null?void 0:E.Picture["PictureUrl"+n]})`})},null,4)]}),_:2},1024)):q("",!0)],64)}),64))]),_:1}),T("div",Me,[T("h1",null,I((s=r[0])==null?void 0:s[`${G(c)}Name`]),1)]),w(ke,{"bg-color":"transparant",items:$.value,class:"text-black position"},{title:b(({item:n})=>[V(I(n.title),1)]),_:1},8,["items"])]),T("section",null,[w(Se,null,{default:b(()=>[w(W,{color:"transparent",class:"py-5 cityDetail-sheet"},{default:b(()=>{var n,d;return[T("h2",null,I(((n=r[0])==null?void 0:n.DescriptionDetail)||((d=r[0])==null?void 0:d.Description)),1)]}),_:1}),w(W,{color:"transparent py-5"},{default:b(()=>[w(_e,null,{default:b(()=>[w(K,{cols:"12",md:"6"},{default:b(()=>{var n,d,E,D,m,_,C;return[(n=r[0])!=null&&n.WebsiteUrl?(M(),F(Y,{key:0,href:(d=r[0])==null?void 0:d.WebsiteUrl,target:"_blank"},{default:b(()=>[V("官方網站")]),_:1},8,["href"])):q("",!0),(E=r[0])!=null&&E.Address?(M(),N("h3",Ie,"地址: "+I((D=r[0])==null?void 0:D.Address),1)):q("",!0),T("h3",De,"連絡電話: "+I((m=r[0])==null?void 0:m.Phone),1),(_=r[0])!=null&&_.OpenTime?(M(),N("h3",Te,"營業時間: "+I((C=r[0])==null?void 0:C.OpenTime),1)):q("",!0),T("h3",Oe,"更新日期: "+I(P.value),1),w(ce,{class:"text-secondary mb-10"},{default:b(()=>{var O,h,y;return[(O=r[0])!=null&&O.Class1?(M(),F(R,{key:0},{default:b(()=>{var g;return[V(I((g=r[0])==null?void 0:g.Class1),1)]}),_:1})):q("",!0),(h=r[0])!=null&&h.Class2?(M(),F(R,{key:1},{default:b(()=>{var g;return[V(I((g=r[0])==null?void 0:g.Class2),1)]}),_:1})):q("",!0),(y=r[0])!=null&&y.Class3?(M(),F(R,{key:2},{default:b(()=>{var g;return[V(I((g=r[0])==null?void 0:g.Class3),1)]}),_:1})):q("",!0)]}),_:1}),w(W,{color:"transparent",class:"d-flex justify-center"},{default:b(()=>[w(Y,{size:"x-large",color:"primary",class:"",onClick:i},{default:b(()=>[qe]),_:1})]),_:1})]}),_:1}),w(K,{cols:"12",md:"6"},{default:b(()=>{var n,d;return[w(t,{center:{lat:(n=r[0])==null?void 0:n.Position.PositionLat,lng:(d=r[0])==null?void 0:d.Position.PositionLon},zoom:19,"map-type-id":"terrain",style:{width:"auto",height:"50vh"}},{default:b(()=>{var E,D;return[w(a,{icon:B.icon1,position:{lat:(E=r[0])==null?void 0:E.Position.PositionLat,lng:(D=r[0])==null?void 0:D.Position.PositionLon}},null,8,["icon","position"])]}),_:1},8,["center"])]}),_:1})]),_:1})]),_:1})]),_:1})])],64)}}};export{je as default};
