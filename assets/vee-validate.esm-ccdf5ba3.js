import{p as On,m as Sn,bs as _n,b as An,bt as En,y as L,u as jn,c as Pn,bo as wn,q as C,bu as W,ag as y,B as tn,aW as rn,bv as Ve,A as Q,C as Fn,an as Ae,aL as fe,bw as Cn,J as In,bx as Mn,by as we,s as kn}from"./index-e4512dc7.js";const Nn=On({...Sn(),..._n()},"VForm"),Ot=An()({name:"VForm",props:Nn(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:r}=n;const a=En(e),u=L();function s(c){c.preventDefault(),a.reset()}function m(c){const d=c,h=a.validate();d.then=h.then.bind(h),d.catch=h.catch.bind(h),d.finally=h.finally.bind(h),r("submit",d),d.defaultPrevented||h.then(V=>{var b;let{valid:_}=V;_&&((b=u.value)==null||b.submit())}),d.preventDefault()}return jn(()=>{var c;return Pn("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:s,onSubmit:m},[(c=t.default)==null?void 0:c.call(t,a)])}),wn(a,u)}});/**
  * vee-validate v4.10.8
  * (c) 2023 Abdelrahman Awad
  * @license MIT
  */function B(e){return typeof e=="function"}function ln(e){return e==null}const ae=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function ze(e){return Number(e)>=0}function Tn(e){const n=parseFloat(e);return isNaN(n)?e:n}function Un(e){return typeof e=="object"&&e!==null}function Rn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Bn(e){if(!Un(e)||Rn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Ee(e,n){return Object.keys(n).forEach(t=>{if(Bn(n[t])){e[t]||(e[t]={}),Ee(e[t],n[t]);return}e[t]=n[t]}),e}function be(e){const n=e.split(".");if(!n.length)return"";let t=String(n[0]);for(let r=1;r<n.length;r++){if(ze(n[r])){t+=`[${n[r]}]`;continue}t+=`.${n[r]}`}return t}const Dn={};function xn(e){return Dn[e]}const Le=Symbol("vee-validate-form"),zn=Symbol("vee-validate-field-instance"),Ye=Symbol("Default empty value"),Ln=typeof window<"u";function Re(e){return B(e)&&!!e.__locatorRef}function Z(e){return!!e&&B(e.parse)&&e.__type==="VVTypedSchema"}function je(e){return!!e&&B(e.validate)}function an(e){return e==="checkbox"||e==="radio"}function $n(e){return ae(e)||Array.isArray(e)}function Wn(e){return Array.isArray(e)?e.length===0:ae(e)&&Object.keys(e).length===0}function Fe(e){return/^\[.+\]$/i.test(e)}function Gn(e){return un(e)&&e.multiple}function un(e){return e.tagName==="SELECT"}function Hn(e){return on(e)&&e.target&&"submit"in e.target}function on(e){return e?!!(typeof Event<"u"&&B(Event)&&e instanceof Event||e&&e.srcElement):!1}function T(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,r,a;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(r=t;r--!==0;)if(!T(e[r],n[r]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;for(r of e.entries())if(!T(r[1],n.get(r[0])))return!1;return!0}if(qe(e)&&qe(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(r=t;r--!==0;)if(e[r]!==n[r])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();for(a=Object.keys(e),t=a.length,r=t;r--!==0;){var u=a[r];if(!T(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}function qe(e){return Ln?e instanceof File:!1}function Je(e,n,t){typeof t.value=="object"&&(t.value=I(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function I(e){if(typeof e!="object")return e;var n=0,t,r,a,u=Object.prototype.toString.call(e);if(u==="[object Object]"?a=Object.create(e.__proto__||null):u==="[object Array]"?a=Array(e.length):u==="[object Set]"?(a=new Set,e.forEach(function(s){a.add(I(s))})):u==="[object Map]"?(a=new Map,e.forEach(function(s,m){a.set(I(m),I(s))})):u==="[object Date]"?a=new Date(+e):u==="[object RegExp]"?a=new RegExp(e.source,e.flags):u==="[object DataView]"?a=new e.constructor(I(e.buffer)):u==="[object ArrayBuffer]"?a=e.slice(0):u.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)Je(a,r[n],Object.getOwnPropertyDescriptor(e,r[n]));for(n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++)Object.hasOwnProperty.call(a,t=r[n])&&a[t]===e[t]||Je(a,t,Object.getOwnPropertyDescriptor(e,t))}return a||e}function $e(e){return Fe(e)?e.replace(/\[|\]/gi,""):e}function U(e,n,t){return e?Fe(n)?e[$e(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,u)=>$n(a)&&u in a?a[u]:t,e):t}function le(e,n,t){if(Fe(n)){e[$e(n)]=t;return}const r=n.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let u=0;u<r.length;u++){if(u===r.length-1){a[r[u]]=t;return}(!(r[u]in a)||ln(a[r[u]]))&&(a[r[u]]=ze(r[u+1])?[]:{}),a=a[r[u]]}}function Te(e,n){if(Array.isArray(e)&&ze(n)){e.splice(Number(n),1);return}ae(e)&&delete e[n]}function Xe(e,n){if(Fe(n)){delete e[$e(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let u=0;u<t.length;u++){if(u===t.length-1){Te(r,t[u]);break}if(!(t[u]in r)||ln(r[t[u]]))break;r=r[t[u]]}const a=t.map((u,s)=>U(e,t.slice(0,s).join(".")));for(let u=a.length-1;u>=0;u--)if(Wn(a[u])){if(u===0){Te(e,t[0]);continue}Te(a[u-1],t[u-1])}}function H(e){return Object.keys(e)}function sn(e,n=void 0){const t=we();return(t==null?void 0:t.provides[e])||Mn(e,n)}function Qe(e,n,t){if(Array.isArray(e)){const r=[...e],a=r.findIndex(u=>T(u,n));return a>=0?r.splice(a,1):r.push(n),r}return T(e,n)?t:n}function Ze(e,n=0){let t=null,r=[];return function(...a){return t&&clearTimeout(t),t=setTimeout(()=>{const u=e(...a);r.forEach(s=>s(u)),r=[]},n),new Promise(u=>r.push(u))}}function Kn(e,n){return ae(n)&&n.number?Tn(e):e}function Be(e,n){let t;return async function(...a){const u=e(...a);t=u;const s=await u;return u!==t||(t=void 0,n(s,a)),s}}function De(e){return Array.isArray(e)?e:e?[e]:[]}function ge(e,n){const t={};for(const r in e)n.includes(r)||(t[r]=e[r]);return t}function Yn(e){let n=null,t=[];return function(...r){const a=fe(()=>{if(n!==a)return;const u=e(...r);t.forEach(s=>s(u)),t=[],n=null});return n=a,new Promise(u=>t.push(u))}}function Ue(e){if(cn(e))return e._value}function cn(e){return"_value"in e}function qn(e){return e.type==="number"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Pe(e){if(!on(e))return e;const n=e.target;if(an(n.type)&&cn(n))return Ue(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(Gn(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(Ue);if(un(n)){const t=Array.from(n.options).find(r=>r.selected);return t?Ue(t):n.value}return qn(n)}function dn(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ae(e)&&e._$$isNormalized?e:ae(e)?Object.keys(e).reduce((t,r)=>{const a=Jn(e[r]);return e[r]!==!1&&(t[r]=en(a)),t},n):typeof e!="string"?n:e.split("|").reduce((t,r)=>{const a=Xn(r);return a.name&&(t[a.name]=en(a.params)),t},n):n}function Jn(e){return e===!0?[]:Array.isArray(e)||ae(e)?e:[e]}function en(e){const n=t=>typeof t=="string"&&t[0]==="@"?Qn(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,r)=>(t[r]=n(e[r]),t),{})}const Xn=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function Qn(e){const n=t=>U(t,e)||t[e];return n.__locatorRef=e,n}function Zn(e){return Array.isArray(e)?e.filter(Re):H(e).filter(n=>Re(e[n])).map(n=>e[n])}const et={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let nt=Object.assign({},et);const ve=()=>nt;async function fn(e,n,t={}){const r=t==null?void 0:t.bails,a={name:(t==null?void 0:t.name)||"{field}",rules:n,label:t==null?void 0:t.label,bails:r??!0,formData:(t==null?void 0:t.values)||{}},s=(await tt(a,e)).errors;return{errors:s,valid:!s.length}}async function tt(e,n){if(Z(e.rules)||je(e.rules))return it(n,e.rules);if(B(e.rules)||Array.isArray(e.rules)){const s={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},m=Array.isArray(e.rules)?e.rules:[e.rules],c=m.length,d=[];for(let h=0;h<c;h++){const V=m[h],_=await V(n,s);if(!(typeof _!="string"&&!Array.isArray(_)&&_)){if(Array.isArray(_))d.push(..._);else{const M=typeof _=="string"?_:mn(s);d.push(M)}if(e.bails)return{errors:d}}}return{errors:d}}const t=Object.assign(Object.assign({},e),{rules:dn(e.rules)}),r=[],a=Object.keys(t.rules),u=a.length;for(let s=0;s<u;s++){const m=a[s],c=await lt(t,n,{name:m,params:t.rules[m]});if(c.error&&(r.push(c.error),e.bails))return{errors:r}}return{errors:r}}function rt(e){return!!e&&e.name==="ValidationError"}function vn(e){return{__type:"VVTypedSchema",async parse(t){var r;try{return{output:await e.validate(t,{abortEarly:!1}),errors:[]}}catch(a){if(!rt(a))throw a;if(!(!((r=a.inner)===null||r===void 0)&&r.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const u=a.inner.reduce((s,m)=>{const c=m.path||"";return s[c]||(s[c]={errors:[],path:c}),s[c].errors.push(...m.errors),s},{});return{errors:Object.values(u)}}}}}async function it(e,n){const r=await(Z(n)?n:vn(n)).parse(e),a=[];for(const u of r.errors)u.errors.length&&a.push(...u.errors);return{errors:a}}async function lt(e,n,t){const r=xn(t.name);if(!r)throw new Error(`No such validator '${t.name}' exists.`);const a=at(t.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:a})},s=await r(n,a,u);return typeof s=="string"?{error:s}:{error:s?void 0:mn(u)}}function mn(e){const n=ve().generateMessage;return n?n(e):"Field is invalid"}function at(e,n){const t=r=>Re(r)?r(n):r;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((r,a)=>(r[a]=t(e[a]),r),{})}async function ut(e,n){const r=await(Z(e)?e:vn(e)).parse(n),a={},u={};for(const s of r.errors){const m=s.errors,c=(s.path||"").replace(/\["(\d+)"\]/g,(d,h)=>`[${h}]`);a[c]={valid:!m.length,errors:m},m.length&&(u[c]=m[0])}return{valid:!r.errors.length,results:a,errors:u,values:r.value}}async function ot(e,n,t){const a=H(e).map(async d=>{var h,V,_;const b=(h=t==null?void 0:t.names)===null||h===void 0?void 0:h[d],M=await fn(U(n,d),e[d],{name:(b==null?void 0:b.name)||d,label:b==null?void 0:b.label,values:n,bails:(_=(V=t==null?void 0:t.bailsMap)===null||V===void 0?void 0:V[d])!==null&&_!==void 0?_:!0});return Object.assign(Object.assign({},M),{path:d})});let u=!0;const s=await Promise.all(a),m={},c={};for(const d of s)m[d.path]={valid:d.valid,errors:d.errors},d.valid||(u=!1,c[d.path]=d.errors[0]);return{valid:u,results:m,errors:c}}let nn=0;function st(e,n){const{value:t,initialValue:r,setInitialValue:a}=ct(e,n.modelValue,n.form);if(!n.form){let _=function(b){var M;"value"in b&&(t.value=b.value),"errors"in b&&d(b.errors),"touched"in b&&(V.touched=(M=b.touched)!==null&&M!==void 0?M:V.touched),"initialValue"in b&&a(b.initialValue)};const{errors:c,setErrors:d}=vt(),h=nn>=Number.MAX_SAFE_INTEGER?0:++nn,V=ft(t,r,c);return{id:h,path:e,value:t,initialValue:r,meta:V,flags:{pendingUnmount:{[h]:!1}},errors:c,setState:_}}const u=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate}),s=C(()=>u.errors);function m(c){var d,h,V;"value"in c&&(t.value=c.value),"errors"in c&&((d=n.form)===null||d===void 0||d.setFieldError(y(e),c.errors)),"touched"in c&&((h=n.form)===null||h===void 0||h.setFieldTouched(y(e),(V=c.touched)!==null&&V!==void 0?V:!1)),"initialValue"in c&&a(c.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:t,errors:s,meta:u,initialValue:r,flags:u.__flags,setState:m}}function ct(e,n,t){const r=L(y(n));function a(){return t?U(t.initialValues.value,y(e),y(r)):y(r)}function u(d){if(!t){r.value=d;return}t.stageInitialValue(y(e),d,!0)}const s=C(a);if(!t)return{value:L(a()),initialValue:s,setInitialValue:u};const m=dt(n,t,s,e);return t.stageInitialValue(y(e),m,!0),{value:C({get(){return U(t.values,y(e))},set(d){t.setFieldValue(y(e),d,!1)}}),initialValue:s,setInitialValue:u}}function dt(e,n,t,r){return Ve(e)?y(e):e!==void 0?e:U(n.values,y(r),y(t))}function ft(e,n,t){const r=Ae({touched:!1,pending:!1,valid:!0,validated:!!y(t).length,initialValue:C(()=>y(n)),dirty:C(()=>!T(y(e),y(n)))});return Q(t,a=>{r.valid=!a.length},{immediate:!0,flush:"sync"}),r}function vt(){const e=L([]);return{errors:e,setErrors:n=>{e.value=De(n)}}}function St(e,n,t){return an(t==null?void 0:t.type)?ht(e,n,t):hn(e,n,t)}function hn(e,n,t){const{initialValue:r,validateOnMount:a,bails:u,type:s,checkedValue:m,label:c,validateOnValueUpdate:d,uncheckedValue:h,controlled:V,keepValueOnUnmount:_,syncVModel:b,form:M}=mt(t),Y=V?sn(Le):void 0,O=M||Y,G=C(()=>be(W(e))),D=C(()=>{if(y(O==null?void 0:O.schema))return;const g=y(n);return je(g)||Z(g)||B(g)||Array.isArray(g)?g:dn(g)}),{id:ue,value:oe,initialValue:ee,meta:k,setState:se,errors:Oe,flags:ce}=st(G,{modelValue:r,form:O,bails:u,label:c,type:s,validate:D.value?te:void 0}),$=C(()=>Oe.value[0]);b&&yt({value:oe,prop:b,handleChange:x});const ne=(f,g=!1)=>{k.touched=!0,g&&q()};async function Se(f){var g,w;return O!=null&&O.validateSchema?(g=(await O.validateSchema(f)).results[y(G)])!==null&&g!==void 0?g:{valid:!0,errors:[]}:D.value?fn(oe.value,D.value,{name:y(G),label:y(c),values:(w=O==null?void 0:O.values)!==null&&w!==void 0?w:{},bails:u}):{valid:!0,errors:[]}}const q=Be(async()=>(k.pending=!0,k.validated=!0,Se("validated-only")),f=>{if(!ce.pendingUnmount[N.id])return se({errors:f.errors}),k.pending=!1,k.valid=f.valid,f}),K=Be(async()=>Se("silent"),f=>(k.valid=f.valid,f));function te(f){return(f==null?void 0:f.mode)==="silent"?K():q()}function x(f,g=!0){const w=Pe(f);me(w,g)}tn(()=>{if(a)return q();(!O||!O.validateSchema)&&K()});function Ce(f){k.touched=f}function de(f){var g;const w=f&&"value"in f?f.value:ee.value;se({value:I(w),initialValue:I(w),touched:(g=f==null?void 0:f.touched)!==null&&g!==void 0?g:!1,errors:(f==null?void 0:f.errors)||[]}),k.pending=!1,k.validated=!1,K()}const re=we();function me(f,g=!0){oe.value=re&&b?Kn(f,re.props.modelModifiers):f,(g?q:K)()}function _e(f){se({errors:Array.isArray(f)?f:[f]})}const We=C({get(){return oe.value},set(f){me(f,d)}}),N={id:ue,name:G,label:c,value:We,meta:k,errors:Oe,errorMessage:$,type:s,checkedValue:m,uncheckedValue:h,bails:u,keepValueOnUnmount:_,resetField:de,handleReset:()=>de(),validate:te,handleChange:x,handleBlur:ne,setState:se,setTouched:Ce,setErrors:_e,setValue:me};if(rn(zn,N),Ve(n)&&typeof y(n)!="function"&&Q(n,(f,g)=>{T(f,g)||(k.validated?q():K())},{deep:!0}),!O)return N;const Ie=C(()=>{const f=D.value;return!f||B(f)||je(f)||Z(f)||Array.isArray(f)?{}:Object.keys(f).reduce((g,w)=>{const j=Zn(f[w]).map(J=>J.__locatorRef).reduce((J,X)=>{const z=U(O.values,X)||O.values[X];return z!==void 0&&(J[X]=z),J},{});return Object.assign(g,j),g},{})});return Q(Ie,(f,g)=>{if(!Object.keys(f).length)return;!T(f,g)&&(k.validated?q():K())}),Fn(()=>{var f;const g=(f=y(N.keepValueOnUnmount))!==null&&f!==void 0?f:y(O.keepValuesOnUnmount),w=W(G);if(g||!O||ce.pendingUnmount[N.id]){O==null||O.removePathState(w,ue);return}ce.pendingUnmount[N.id]=!0;const j=O.getPathState(w);if(Array.isArray(j==null?void 0:j.id)&&(j!=null&&j.multiple)?j!=null&&j.id.includes(N.id):(j==null?void 0:j.id)===N.id){if(j!=null&&j.multiple&&Array.isArray(j.value)){const X=j.value.findIndex(z=>T(z,y(N.checkedValue)));if(X>-1){const z=[...j.value];z.splice(X,1),O.setFieldValue(w,z)}Array.isArray(j.id)&&j.id.splice(j.id.indexOf(N.id),1)}else O.unsetPathValue(W(G));O.removePathState(w,ue)}}),N}function mt(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!(e!=null&&e.syncVModel),r=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",a=t&&!("initialValue"in(e||{}))?xe(we(),r):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:a});const u="valueProp"in e?e.valueProp:e.checkedValue,s="standalone"in e?!e.standalone:e.controlled,m=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:a,controlled:s??!0,checkedValue:u,syncVModel:m})}function ht(e,n,t){const r=t!=null&&t.standalone?void 0:sn(Le),a=t==null?void 0:t.checkedValue,u=t==null?void 0:t.uncheckedValue;function s(m){const c=m.handleChange,d=C(()=>{const V=y(m.value),_=y(a);return Array.isArray(V)?V.findIndex(b=>T(b,_))>=0:T(_,V)});function h(V,_=!0){var b,M;if(d.value===((b=V==null?void 0:V.target)===null||b===void 0?void 0:b.checked)){_&&m.validate();return}const Y=W(e),O=r==null?void 0:r.getPathState(Y),G=Pe(V);let D=(M=y(a))!==null&&M!==void 0?M:G;r&&(O!=null&&O.multiple)&&O.type==="checkbox"?D=Qe(U(r.values,Y)||[],D,void 0):(t==null?void 0:t.type)==="checkbox"&&(D=Qe(y(m.value),D,y(u))),c(D,_)}return Object.assign(Object.assign({},m),{checked:d,checkedValue:a,uncheckedValue:u,handleChange:h})}return s(hn(e,n,t))}function yt({prop:e,value:n,handleChange:t}){const r=we();if(!r||!e)return;const a=typeof e=="string"?e:"modelValue",u=`update:${a}`;a in r.props&&(Q(n,s=>{T(s,xe(r,a))||r.emit(u,s)}),Q(()=>xe(r,a),s=>{if(s===Ye&&n.value===void 0)return;const m=s===Ye?void 0:s;T(m,n.value)||t(m)}))}function xe(e,n){if(e)return e.props[n]}let gt=0;const pe=["bails","fieldsCount","id","multiple","type","validate"];function yn(e){const n=y(e==null?void 0:e.initialValues)||{},t=y(e==null?void 0:e.validationSchema);return t&&Z(t)&&B(t.cast)?I(t.cast(n)||{}):I(n)}function _t(e){var n;const t=gt++;let r=0;const a=L(!1),u=L(!1),s=L(0),m=[],c=Ae(yn(e)),d=L([]),h=L({}),V=L({}),_=Yn(()=>{V.value=d.value.reduce((l,i)=>(l[be(W(i.path))]=i,l),{})});function b(l,i){const o=x(l);if(!o){typeof l=="string"&&(h.value[be(l)]=De(i));return}if(typeof l=="string"){const v=be(l);h.value[v]&&delete h.value[v]}o.errors=De(i),o.valid=!o.errors.length}function M(l){H(l).forEach(i=>{b(i,l[i])})}e!=null&&e.initialErrors&&M(e.initialErrors);const Y=C(()=>{const l=d.value.reduce((i,o)=>(o.errors.length&&(i[o.path]=o.errors),i),{});return Object.assign(Object.assign({},h.value),l)}),O=C(()=>H(Y.value).reduce((l,i)=>{const o=Y.value[i];return o!=null&&o.length&&(l[i]=o[0]),l},{})),G=C(()=>d.value.reduce((l,i)=>(l[i.path]={name:i.path||"",label:i.label||""},l),{})),D=C(()=>d.value.reduce((l,i)=>{var o;return l[i.path]=(o=i.bails)!==null&&o!==void 0?o:!0,l},{})),ue=Object.assign({},(e==null?void 0:e.initialErrors)||{}),oe=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:ee,originalInitialValues:k,setInitialValues:se}=bt(d,c,e),Oe=pt(d,c,k,O),ce=C(()=>d.value.reduce((l,i)=>{const o=U(c,i.path);return le(l,i.path,o),l},{})),$=e==null?void 0:e.validationSchema;function ne(l,i){var o,v;const S=C(()=>U(ee.value,W(l))),p=V.value[W(l)];if(p){((i==null?void 0:i.type)==="checkbox"||(i==null?void 0:i.type)==="radio")&&(p.multiple=!0);const R=r++;return Array.isArray(p.id)?p.id.push(R):p.id=[p.id,R],p.fieldsCount++,p.__flags.pendingUnmount[R]=!1,p}const A=C(()=>U(c,W(l))),F=W(l),E=r++,P=Ae({id:E,path:l,touched:!1,pending:!1,valid:!0,validated:!!(!((o=ue[F])===null||o===void 0)&&o.length),initialValue:S,errors:kn([]),bails:(v=i==null?void 0:i.bails)!==null&&v!==void 0?v:!1,label:i==null?void 0:i.label,type:(i==null?void 0:i.type)||"default",value:A,multiple:!1,__flags:{pendingUnmount:{[E]:!1}},fieldsCount:1,validate:i==null?void 0:i.validate,dirty:C(()=>!T(y(A),y(S)))});return d.value.push(P),V.value[F]=P,_(),O.value[F]&&!ue[F]&&fe(()=>{ie(F,{mode:"silent"})}),Ve(l)&&Q(l,R=>{_();const ye=I(A.value);V.value[R]=P,fe(()=>{le(c,R,ye)})}),P}const Se=Ze(Ke,5),q=Ze(Ke,5),K=Be(async l=>await l==="silent"?Se():q(),(l,[i])=>{const o=H(g.errorBag.value);return[...new Set([...H(l.results),...d.value.map(S=>S.path),...o])].sort().reduce((S,p)=>{const A=p,F=x(A)||Ce(A),E=(l.results[A]||{errors:[]}).errors,P={errors:E,valid:!E.length};return S.results[A]=P,P.valid||(S.errors[A]=P.errors[0]),F&&h.value[A]&&delete h.value[A],F?(F.valid=P.valid,i==="silent"||i==="validated-only"&&!F.validated||b(F,P.errors),S):(b(A,E),S)},{valid:l.valid,results:{},errors:{}})});function te(l){d.value.forEach(l)}function x(l){const i=typeof l=="string"?be(l):l;return typeof i=="string"?V.value[i]:i}function Ce(l){return d.value.filter(o=>l.startsWith(o.path)).reduce((o,v)=>o?v.path.length>o.path.length?v:o:v,void 0)}let de=[],re;function me(l){return de.push(l),re||(re=fe(()=>{[...de].sort().reverse().forEach(o=>{Xe(c,o)}),de=[],re=null})),re}function _e(l){return function(o,v){return function(p){return p instanceof Event&&(p.preventDefault(),p.stopPropagation()),te(A=>A.touched=!0),a.value=!0,s.value++,he().then(A=>{const F=I(c);if(A.valid&&typeof o=="function"){const E=I(ce.value);let P=l?E:F;return A.values&&(P=A.values),o(P,{evt:p,controlledValues:E,setErrors:M,setFieldError:b,setTouched:Me,setFieldTouched:z,setValues:j,setFieldValue:w,resetForm:ke,resetField:Ge})}!A.valid&&typeof v=="function"&&v({values:F,evt:p,errors:A.errors,results:A.results})}).then(A=>(a.value=!1,A),A=>{throw a.value=!1,A})}}}const N=_e(!1);N.withControlled=_e(!0);function Ie(l,i){const o=d.value.findIndex(S=>S.path===l),v=d.value[o];if(!(o===-1||!v)){if(fe(()=>{ie(l,{mode:"silent",warn:!1})}),v.multiple&&v.fieldsCount&&v.fieldsCount--,Array.isArray(v.id)){const S=v.id.indexOf(i);S>=0&&v.id.splice(S,1),delete v.__flags.pendingUnmount[i]}(!v.multiple||v.fieldsCount<=0)&&(d.value.splice(o,1),He(l),_(),delete V.value[l])}}function f(l){return te(i=>{i.path.startsWith(l)&&H(i.__flags.pendingUnmount).forEach(o=>{i.__flags.pendingUnmount[o]=!0})})}const g={formId:t,values:c,controlledValues:ce,errorBag:Y,errors:O,schema:$,submitCount:s,meta:Oe,isSubmitting:a,isValidating:u,fieldArrays:m,keepValuesOnUnmount:oe,validateSchema:y($)?K:void 0,validate:he,setFieldError:b,validateField:ie,setFieldValue:w,setValues:j,setErrors:M,setFieldTouched:z,setTouched:Me,resetForm:ke,resetField:Ge,handleSubmit:N,stageInitialValue:gn,unsetInitialValue:He,setFieldInitialValue:Ne,useFieldModel:X,createPathState:ne,getPathState:x,unsetPathValue:me,removePathState:Ie,initialValues:ee,getAllPathStates:()=>d.value,markForUnmount:f};function w(l,i,o=!0){const v=I(i),S=typeof l=="string"?l:l.path;x(S)||ne(S),le(c,S,v),o&&ie(S)}function j(l,i=!0){Ee(c,l),m.forEach(o=>o&&o.reset()),i&&he()}function J(l){const i=x(y(l))||ne(l);return C({get(){return i.value},set(o){const v=y(l);w(v,o,!1),i.validated=!0,i.pending=!0,ie(v).then(()=>{i.pending=!1})}})}function X(l){return Array.isArray(l)?l.map(J):J(l)}function z(l,i){const o=x(l);o&&(o.touched=i)}function Me(l){H(l).forEach(i=>{z(i,!!l[i])})}function Ge(l,i){var o;const v=i&&"value"in i?i.value:U(ee.value,l);Ne(l,I(v)),w(l,v,!1),z(l,(o=i==null?void 0:i.touched)!==null&&o!==void 0?o:!1),b(l,(i==null?void 0:i.errors)||[])}function ke(l){let i=l!=null&&l.values?l.values:k.value;i=Z($)&&B($.cast)?$.cast(i):i,se(i),te(o=>{var v;o.validated=!1,o.touched=((v=l==null?void 0:l.touched)===null||v===void 0?void 0:v[o.path])||!1,w(o.path,U(i,o.path),!1),b(o.path,void 0)}),j(i,!1),M((l==null?void 0:l.errors)||{}),s.value=(l==null?void 0:l.submitCount)||0,fe(()=>{he({mode:"silent"})})}async function he(l){const i=(l==null?void 0:l.mode)||"force";if(i==="force"&&te(p=>p.validated=!0),g.validateSchema)return g.validateSchema(i);u.value=!0;const o=await Promise.all(d.value.map(p=>p.validate?p.validate(l).then(A=>({key:p.path,valid:A.valid,errors:A.errors})):Promise.resolve({key:p.path,valid:!0,errors:[]})));u.value=!1;const v={},S={};for(const p of o)v[p.key]={valid:p.valid,errors:p.errors},p.errors.length&&(S[p.key]=p.errors[0]);return{valid:o.every(p=>p.valid),results:v,errors:S}}async function ie(l,i){var o;const v=x(l);if(v&&(v.validated=!0),$){const{results:S}=await K((i==null?void 0:i.mode)||"validated-only");return S[l]||{errors:[],valid:!0}}return v!=null&&v.validate?v.validate(i):(!v&&(o=i==null?void 0:i.warn),Promise.resolve({errors:[],valid:!0}))}function He(l){Xe(ee.value,l)}function gn(l,i,o=!1){Ne(l,i),le(c,l,i),o&&!(e!=null&&e.initialValues)&&le(k.value,l,I(i))}function Ne(l,i){le(ee.value,l,I(i))}async function Ke(){const l=y($);if(!l)return{valid:!0,results:{},errors:{}};u.value=!0;const i=je(l)||Z(l)?await ut(l,c):await ot(l,c,{names:G.value,bailsMap:D.value});return u.value=!1,i}const pn=N((l,{evt:i})=>{Hn(i)&&i.target.submit()});tn(()=>{if(e!=null&&e.initialErrors&&M(e.initialErrors),e!=null&&e.initialTouched&&Me(e.initialTouched),e!=null&&e.validateOnMount){he();return}g.validateSchema&&g.validateSchema("silent")}),Ve($)&&Q($,()=>{var l;(l=g.validateSchema)===null||l===void 0||l.call(g,"validated-only")}),rn(Le,g);function bn(l,i){const o=x(W(l))||ne(l),v=()=>B(i)?i(ge(o,pe)):i||{};function S(){var F;o.touched=!0,((F=v().validateOnBlur)!==null&&F!==void 0?F:ve().validateOnBlur)&&ie(o.path)}function p(F){var E;const P=(E=v().validateOnModelUpdate)!==null&&E!==void 0?E:ve().validateOnModelUpdate;w(o.path,F,P)}return C(()=>{if(B(i)){const P=i(o),R=P.model||"modelValue";return Object.assign({onBlur:S,[R]:o.value,[`onUpdate:${R}`]:p},P.props||{})}const F=(i==null?void 0:i.model)||"modelValue",E={onBlur:S,[F]:o.value,[`onUpdate:${F}`]:p};return i!=null&&i.mapProps?Object.assign(Object.assign({},E),i.mapProps(ge(o,pe))):E})}function Vn(l,i){const o=x(W(l))||ne(l),v=()=>B(i)?i(ge(o,pe)):i||{};function S(){var E;o.touched=!0,((E=v().validateOnBlur)!==null&&E!==void 0?E:ve().validateOnBlur)&&ie(o.path)}function p(E){var P;const R=Pe(E),ye=(P=v().validateOnInput)!==null&&P!==void 0?P:ve().validateOnInput;w(o.path,R,ye)}function A(E){var P;const R=Pe(E),ye=(P=v().validateOnChange)!==null&&P!==void 0?P:ve().validateOnChange;w(o.path,R,ye)}return C(()=>{const E={value:o.value,onChange:A,onInput:p,onBlur:S};return B(i)?Object.assign(Object.assign({},E),i(ge(o,pe)).attrs||{}):i!=null&&i.mapAttrs?Object.assign(Object.assign({},E),i.mapAttrs(ge(o,pe))):E})}return Object.assign(Object.assign({},g),{values:Cn(c),handleReset:()=>ke(),submitForm:pn,defineComponentBinds:bn,defineInputBinds:Vn})}function pt(e,n,t,r){const a={touched:"some",pending:"some",valid:"every"},u=C(()=>!T(n,y(t)));function s(){const c=e.value;return H(a).reduce((d,h)=>{const V=a[h];return d[h]=c[V](_=>_[h]),d},{})}const m=Ae(s());return In(()=>{const c=s();m.touched=c.touched,m.valid=c.valid,m.pending=c.pending}),C(()=>Object.assign(Object.assign({initialValues:y(t)},m),{valid:m.valid&&!H(r.value).length,dirty:u.value}))}function bt(e,n,t){const r=yn(t),a=t==null?void 0:t.initialValues,u=L(r),s=L(I(r));function m(c,d=!1){u.value=Ee(I(u.value)||{},I(c)),s.value=Ee(I(s.value)||{},I(c)),d&&e.value.forEach(h=>{if(h.touched)return;const _=U(u.value,h.path);le(n,h.path,I(_))})}return Ve(a)&&Q(a,c=>{c&&m(c,!0)},{deep:!0}),{initialValues:u,originalInitialValues:s,setInitialValues:m}}export{Ot as V,St as a,_t as u};
